(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return l},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return o}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,i(e));else t.set(r,i(n));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return o},formatWithValidation:function(){return u},urlObjectKeys:function(){return l}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(90809)._(e.r(98183)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,n=e.protocol||"",s=e.pathname||"",o=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(a.urlQueryToSearchParams(l)));let c=e.search||l&&`?${l}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||i.test(n))&&!1!==u?(u="//"+(u||""),s&&"/"!==s[0]&&(s="/"+s)):u||(u=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),s=s.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${n}${u}${s}${c}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return o(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let n=e.r(71645);function s(e,t){let r=(0,n.useRef)(null),s=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=a(e,n)),t&&(s.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return v},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return j},NormalizeError:function(){return g},PageNotFoundError:function(){return b},SP:function(){return h},ST:function(){return m},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return l},isResSent:function(){return x},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return N}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function x(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&x(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="undefined"!=typeof performance,m=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class v extends Error{}class g extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(18967),s=e.r(52817);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return v},useLinkStatus:function(){return b}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(90809),i=e.r(43476),o=a._(e.r(71645)),l=e.r(95057),u=e.r(8372),c=e.r(18581),d=e.r(18967),x=e.r(5550);e.r(33525);let p=e.r(91949),f=e.r(73668),h=e.r(9396);function m(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function v(t){var r;let n,s,a,[l,v]=(0,o.useOptimistic)(p.IDLE_LINK_STATUS),b=(0,o.useRef)(null),{href:j,as:y,children:N,prefetch:w=null,passHref:k,replace:C,shallow:M,scroll:S,onClick:P,onMouseEnter:_,onTouchStart:E,legacyBehavior:O=!1,onNavigate:L,ref:R,unstable_dynamicOnHover:$,...I}=t;n=N,O&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let T=o.default.useContext(u.AppRouterContext),U=!1!==w,A=!1!==w?null===(r=w)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:B,as:z}=o.default.useMemo(()=>{let e=m(j);return{href:e,as:y?m(y):e}},[j,y]);if(O){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(n)}let W=O?s&&"object"==typeof s&&s.ref:R,F=o.default.useCallback(e=>(null!==T&&(b.current=(0,p.mountLinkInstance)(e,B,T,A,U,v)),()=>{b.current&&((0,p.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,p.unmountPrefetchableInstance)(e)}),[U,B,T,A,v]),D={ref:(0,c.useMergedRef)(F,W),onClick(t){O||"function"!=typeof P||P(t),O&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!T||t.defaultPrevented||function(t,r,n,s,a,i,l){if("undefined"!=typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);o.default.startTransition(()=>{d(n||r,a?"replace":"push",i??!0,s.current)})}}(t,B,z,b,C,S,L)},onMouseEnter(e){O||"function"!=typeof _||_(e),O&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),T&&U&&(0,p.onNavigationIntent)(e.currentTarget,!0===$)},onTouchStart:function(e){O||"function"!=typeof E||E(e),O&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),T&&U&&(0,p.onNavigationIntent)(e.currentTarget,!0===$)}};return(0,d.isAbsoluteUrl)(z)?D.href=z:O&&!k&&("a"!==s.type||"href"in s.props)||(D.href=(0,x.addBasePath)(z)),a=O?o.default.cloneElement(s,D):(0,i.jsx)("a",{...I,...D,children:n}),(0,i.jsx)(g.Provider,{value:l,children:a})}e.r(84508);let g=(0,o.createContext)(p.IDLE_LINK_STATUS),b=()=>(0,o.useContext)(g);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18566,(e,t,r)=>{t.exports=e.r(76562)},79422,e=>{"use strict";var t=e.i(47167),r=e.i(43476),n=e.i(22016),s=e.i(18566),a=e.i(71645);function i(){return(0,r.jsx)("span",{className:"grid grid-cols-3 gap-0.5",children:Array.from({length:9}).map((e,t)=>(0,r.jsx)("span",{className:"h-1.5 w-1.5 rounded-sm bg-[var(--ui-muted)]"},t))})}function o({status:e}){return(0,r.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset ${"active"===e?"bg-[var(--ui-brand-soft)] text-[var(--ui-brand-600)] ring-[var(--ui-brand-600)]":"bg-[var(--ui-surface-2)] text-[var(--ui-muted)] ring-[var(--ui-border)]"}`,children:"active"===e?"Activo":"Próximamente"})}function l({app:e,onNavigate:t}){return"active"!==e.status?(0,r.jsxs)("div",{className:"rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface)] p-5 opacity-70",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-base font-semibold text-[var(--ui-text)]",children:e.name}),(0,r.jsx)(o,{status:e.status})]}),(0,r.jsx)("div",{className:"mt-1 text-sm leading-5 text-[var(--ui-muted)]",children:e.description})]}):(0,r.jsxs)("a",{href:e.href,onClick:t,className:"block rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface)] p-5 hover:bg-[var(--ui-surface-2)]",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-base font-semibold text-[var(--ui-text)]",children:e.name}),(0,r.jsx)(o,{status:e.status})]}),(0,r.jsx)("div",{className:"mt-1 text-sm leading-5 text-[var(--ui-muted)]",children:e.description})]})}function u({sites:e=[],activeSiteId:t=""}){let[n,o]=(0,a.useState)(!1),u=(0,a.useRef)(null),c=(0,s.useRouter)(),d=(0,s.usePathname)(),x=(0,s.useSearchParams)(),p=(0,a.useMemo)(()=>[{id:"hub",name:"Hub",description:"Launcher del ecosistema.",href:"https://os.ventogroup.co",status:"active",group:"Workspace"},{id:"viso",name:"VISO",description:"Gerencia y auditoría.",href:"https://viso.ventogroup.co",status:"soon",group:"Interno"},{id:"nexo",name:"NEXO",description:"Inventario y logística.",href:"https://nexo.ventogroup.co",status:"active",group:"Interno"},{id:"fogo",name:"FOGO",description:"Recetas y producción.",href:"https://fogo.ventogroup.co",status:"soon",group:"Interno"},{id:"origo",name:"ORIGO",description:"Compras y proveedores.",href:"https://origo.ventogroup.co",status:"soon",group:"Interno"},{id:"pulso",name:"PULSO",description:"POS y ventas.",href:"https://pulso.ventogroup.co",status:"active",group:"Interno"},{id:"aura",name:"AURA",description:"Marketing y contenido.",href:"https://aura.ventogroup.co",status:"soon",group:"Interno"}],[]),f=p.filter(e=>"Workspace"===e.group),h=p.filter(e=>"Interno"===e.group),m=p.filter(e=>"Directo"===e.group),v=x.get("site_id")??t??"",g=(0,a.useMemo)(()=>e.find(e=>e.id===v),[e,v]),b=g?.name??v??"";return(0,a.useEffect)(()=>{let e=e=>{if(!n)return;let t=e.target;u.current&&!u.current.contains(t)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[n]),(0,r.jsxs)("div",{ref:u,className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>o(e=>!e),className:"inline-flex items-center gap-2 rounded-xl bg-[var(--ui-surface)] h-12 px-4 text-base font-semibold text-[var(--ui-text)] ring-1 ring-inset ring-[var(--ui-border)] hover:bg-[var(--ui-surface-2)]","aria-haspopup":"dialog","aria-expanded":n,children:[(0,r.jsx)(i,{}),"Apps"]}),n?(0,r.jsx)("div",{className:"absolute right-0 z-50 mt-2 w-[360px] rounded-2xl border border-[var(--ui-border)] bg-[var(--ui-surface)] backdrop-blur-xl p-4 shadow-[var(--ui-shadow-2)]",children:(0,r.jsxs)("div",{className:"max-h-[70vh] space-y-4 overflow-y-auto pr-1",children:[e.length?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-xs font-semibold tracking-wide text-[var(--ui-muted)]",children:"SEDE"}),(0,r.jsxs)("select",{className:"h-12 w-full rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface)] px-3 text-base",value:v,onChange:e=>{var t;let r,n;t=e.target.value,r=new URLSearchParams(x.toString()),t?r.set("site_id",t):r.delete("site_id"),n=r.toString(),c.push(n?`${d}?${n}`:d),o(!1)},children:[(0,r.jsx)("option",{value:"",children:"Sin sede"}),e.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name??e.id},e.id))]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-[var(--ui-muted)]",children:["Activa: ",b||"Sin sede"]})]}):null,(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-xs font-semibold tracking-wide text-[var(--ui-muted)]",children:"WORKSPACE"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:f.map(e=>(0,r.jsx)(l,{app:e,onNavigate:()=>o(!1)},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-xs font-semibold tracking-wide text-[var(--ui-muted)]",children:"INTERNO"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:h.map(e=>(0,r.jsx)(l,{app:e,onNavigate:()=>o(!1)},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-xs font-semibold tracking-wide text-[var(--ui-muted)]",children:"DIRECTO"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:m.map(e=>(0,r.jsx)(l,{app:e,onNavigate:()=>o(!1)},e.id))})]})]})}):null]})}var c=e.i(11795);let d="nexo_role_override",x=new Set(["propietario","gerente_general"]),p=[{value:"propietario",label:"Propietario"},{value:"gerente_general",label:"Gerente general"},{value:"gerente",label:"Gerente"},{value:"bodeguero",label:"Bodeguero"},{value:"cajero",label:"Cajero"},{value:"barista",label:"Barista"},{value:"cocinero",label:"Cocinero"},{value:"repostero",label:"Repostero"},{value:"panadero",label:"Panadero"},{value:"pastelero",label:"Pastelero"},{value:"logistica",label:"Logistica"}];function f({name:e,role:t,email:n,sites:i}){let[o,l]=(0,a.useState)(!1),[u,f]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),v=(0,a.useRef)(null),g=(0,s.useRouter)(),b=(0,s.usePathname)(),j=(0,s.useSearchParams)(),y=(0,a.useMemo)(()=>{let t;return(t=((e||n||"Vento")??"").trim())&&t.split(/\s+/).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()??"").join("")||"VG"},[e,n]),N=e||"Usuario",w=!!t&&x.has(t),k=(0,a.useMemo)(()=>new Map(p.map(e=>[e.value,e.label])),[]),C=j.get("site_id")??"",M=async()=>{try{f(!0);let e=(0,c.createClient)();await e.auth.signOut()}finally{let e=encodeURIComponent(window.location.origin);window.location.href=`https://os.ventogroup.co/login?returnTo=${e}`}},S=e=>{m(e),(e=>{if("undefined"!=typeof document){if(!e){document.cookie=`${d}=; path=/; max-age=0`;return}document.cookie=`${d}=${e}; path=/; max-age=2592000`}})(e),g.refresh()};return(0,a.useEffect)(()=>{let e=e=>{if(!o)return;let t=e.target;v.current&&!v.current.contains(t)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o]),(0,a.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.cookie.split("; ").find(e=>e.startsWith(`${d}=`));e&&m((e.split("=")[1]??"")||null)},[]),(0,r.jsxs)("div",{ref:v,className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>l(e=>!e),className:"inline-flex items-center gap-2 rounded-xl bg-[var(--ui-surface)] h-12 px-4 text-base font-semibold text-[var(--ui-text)] ring-1 ring-inset ring-[var(--ui-border)] hover:bg-[var(--ui-surface-2)]","aria-haspopup":"dialog","aria-expanded":o,children:[(0,r.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-[var(--ui-brand)] text-sm font-semibold text-[var(--ui-on-primary)]",children:y}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Perfil"})]}),o?(0,r.jsxs)("div",{className:"absolute right-0 z-50 mt-2 w-64 rounded-2xl border border-[var(--ui-border)] bg-[var(--ui-surface)] backdrop-blur-xl p-4 shadow-[var(--ui-shadow-2)]",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--ui-text)]",children:N}),t?(0,r.jsxs)("div",{className:"mt-1 text-xs text-[var(--ui-muted)]",children:["Rol: ",k.get(t)??t]}):null,n?(0,r.jsxs)("div",{className:"mt-2 text-xs text-[var(--ui-muted)]",children:["Email: ",n]}):null,(0,r.jsx)("div",{className:"mt-3 rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface-2)] px-3 py-2 text-xs text-[var(--ui-muted)]",children:"Sesion activa en NEXO."}),w?(0,r.jsxs)("div",{className:"mt-3 space-y-3 rounded-xl border border-[var(--ui-brand-600)] bg-[var(--ui-brand-soft)] px-3 py-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--ui-brand-600)]",children:"Modo prueba"}),(0,r.jsxs)("div",{className:"text-xs text-[var(--ui-text)]",children:["Rol activo:"," ",(0,r.jsx)("span",{className:"font-semibold",children:h?k.get(h)??h:"Real"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>{let t=h===e.value;return(0,r.jsx)("button",{type:"button",onClick:()=>S(e.value),className:`rounded-full px-2.5 py-1 text-[11px] font-semibold ${t?"bg-[var(--ui-brand)] text-[var(--ui-on-primary)]":"bg-[var(--ui-surface)] text-[var(--ui-brand-600)] ring-1 ring-inset ring-[var(--ui-brand-600)]"}`,children:e.label},e.value)})}),(0,r.jsx)("button",{type:"button",onClick:()=>S(null),className:"text-xs font-semibold text-[var(--ui-brand-600)] hover:text-[var(--ui-brand-700)]",children:"Usar rol real"})]}):null,w&&i?.length?(0,r.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--ui-muted)]",children:"Sede activa"}),(0,r.jsxs)("select",{className:"h-12 w-full rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface)] px-3 text-base",value:C,onChange:e=>{var t;let r,n;return t=e.target.value,r=new URLSearchParams(j.toString()),t?r.set("site_id",t):r.delete("site_id"),n=r.toString(),void(g.push(n?`${b}?${n}`:b),l(!1))},children:[(0,r.jsx)("option",{value:"",children:"Sin sede"}),i.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name??e.id},e.id))]})]}):null,(0,r.jsx)("button",{type:"button",onClick:M,disabled:u,className:"mt-3 inline-flex h-12 w-full items-center justify-center rounded-xl bg-[var(--ui-primary)] px-3 text-base font-semibold text-[var(--ui-on-primary)] hover:bg-[var(--ui-primary-hover)] disabled:opacity-60",children:u?"Cerrando...":"Cerrar sesion"})]}):null]})}let h={default:"#00D4FF",nexo:"#F59E0B",fogo:"#fd5315",pulso:"#00D4FF",viso:"#A855F7",origo:"#10B981",anima:"#E2006A",aura:"#FF7A59"};function m({className:e,entity:t="default"}){let n=h[t];return(0,r.jsx)("div",{className:"vento-icon-glow",children:(0,r.jsxs)("svg",{viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e??"h-8 w-8",children:[(0,r.jsx)("path",{d:"M12 16L32 52L52 16",stroke:n,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"vento-line-glow"}),(0,r.jsx)("line",{x1:"12",y1:"16",x2:"22",y2:"34",stroke:n,strokeWidth:"3",strokeLinecap:"round",className:"vento-line-glow vento-delay-1"}),(0,r.jsx)("line",{x1:"52",y1:"16",x2:"42",y2:"34",stroke:n,strokeWidth:"3",strokeLinecap:"round",className:"vento-line-glow vento-delay-2"}),(0,r.jsx)("line",{x1:"22",y1:"34",x2:"42",y2:"34",stroke:n,strokeWidth:"3",strokeLinecap:"round",className:"vento-line-glow vento-delay-3"}),(0,r.jsx)("circle",{cx:"12",cy:"16",r:"5",fill:n,className:"vento-node-pulse"}),(0,r.jsx)("circle",{cx:"52",cy:"16",r:"5",fill:n,className:"vento-node-pulse vento-delay-1"}),(0,r.jsx)("circle",{cx:"32",cy:"52",r:"5",fill:n,className:"vento-node-pulse vento-delay-2"}),(0,r.jsx)("circle",{cx:"22",cy:"34",r:"4",fill:n,className:"vento-node-pulse vento-delay-3"}),(0,r.jsx)("circle",{cx:"42",cy:"34",r:"4",fill:n,className:"vento-node-pulse vento-delay-4"})]})})}function v({className:e,entity:t="default",showText:n=!0,title:s,subtitle:a}){let i=a??("nexo"===t?"NEXO · Inventario":t.toUpperCase());return(0,r.jsxs)("div",{className:`flex items-center gap-3 ${e??""}`,children:[(0,r.jsx)(m,{entity:t,className:"h-9 w-9 shrink-0"}),n?(0,r.jsxs)("div",{className:"flex flex-col leading-none",children:[(0,r.jsx)("span",{className:"text-[17px] font-semibold tracking-tight text-[var(--ui-text)]",children:s??"Vento OS"}),(0,r.jsx)("span",{className:"text-[12px] text-[var(--ui-muted)]",children:i})]}):null]})}let g="pulso".toLowerCase()??"pulso",b=t.default.env.NEXT_PUBLIC_VENTO_APP_CODE??g,j="PULSO",y=(t.default.env.NEXT_PUBLIC_VENTO_PERMISSIONS??"false")==="true",N=[{label:"Operación",items:[{href:"/",label:"Scanner",description:"Identificación y redención",icon:"scan"}]}];function w({name:e}){let t="none";switch(e){case"dashboard":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M4 4h7v7H4z"}),(0,r.jsx)("path",{d:"M13 4h7v5h-7z"}),(0,r.jsx)("path",{d:"M13 11h7v9h-7z"}),(0,r.jsx)("path",{d:"M4 13h7v7H4z"})]});case"package":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M21 8.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8.5"}),(0,r.jsx)("path",{d:"M12 3 2 8l10 5 10-5-10-5z"}),(0,r.jsx)("path",{d:"M12 13v8"})]});case"scan":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),(0,r.jsx)("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),(0,r.jsx)("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),(0,r.jsx)("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),(0,r.jsx)("path",{d:"M7 12h10"})]});case"printer":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M7 8V4h10v4"}),(0,r.jsx)("path",{d:"M6 17h12v3H6z"}),(0,r.jsx)("path",{d:"M5 8h14a2 2 0 0 1 2 2v5H3v-5a2 2 0 0 1 2-2z"})]});case"boxes":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M3 7h7v7H3z"}),(0,r.jsx)("path",{d:"M14 7h7v7h-7z"}),(0,r.jsx)("path",{d:"M7 14v7"}),(0,r.jsx)("path",{d:"M17 14v7"})]});case"arrows":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M7 7h11l-3-3"}),(0,r.jsx)("path",{d:"M17 17H6l3 3"})]});case"clipboard":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M9 3h6a2 2 0 0 1 2 2v2H7V5a2 2 0 0 1 2-2z"}),(0,r.jsx)("path",{d:"M7 7h10v14H7z"}),(0,r.jsx)("path",{d:"M10 11h4"}),(0,r.jsx)("path",{d:"M10 15h4"})]});case"sliders":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M4 6h16"}),(0,r.jsx)("path",{d:"M4 12h16"}),(0,r.jsx)("path",{d:"M4 18h16"}),(0,r.jsx)("circle",{cx:"9",cy:"6",r:"2"}),(0,r.jsx)("circle",{cx:"15",cy:"12",r:"2"}),(0,r.jsx)("circle",{cx:"7",cy:"18",r:"2"})]});case"map":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M9 18l-6 3V6l6-3 6 3 6-3v15l-6 3-6-3z"}),(0,r.jsx)("path",{d:"M9 3v15"}),(0,r.jsx)("path",{d:"M15 6v15"})]});case"layers":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M12 3 2 8l10 5 10-5-10-5z"}),(0,r.jsx)("path",{d:"M2 12l10 5 10-5"}),(0,r.jsx)("path",{d:"M2 16l10 5 10-5"})]});case"sparkles":return(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:t,stroke:"currentColor",strokeWidth:"1.6",children:[(0,r.jsx)("path",{d:"M12 3l1.5 3.5L17 8l-3.5 1.5L12 13l-1.5-3.5L7 8l3.5-1.5L12 3z"}),(0,r.jsx)("path",{d:"M5 16l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"}),(0,r.jsx)("path",{d:"M18 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"})]});default:return null}}function k({item:e,active:t,onNavigate:s}){return(0,r.jsxs)(n.default,{href:e.href,onClick:s,className:`ui-sidebar-item ${t?"active":""}`,children:[(0,r.jsx)("span",{className:"ui-sidebar-item-icon",children:(0,r.jsx)(w,{name:e.icon})}),(0,r.jsxs)("span",{className:"ui-sidebar-item-content",children:[(0,r.jsx)("span",{className:"ui-sidebar-item-title",children:e.label}),e.description?(0,r.jsx)("span",{className:"ui-sidebar-item-desc",children:e.description}):null]})]})}function C({children:e,displayName:t,role:n,email:i,sites:o,activeSiteId:l}){let d=(0,s.usePathname)(),x=(0,s.useSearchParams)(),[p,h]=(0,a.useState)(!1),[m,w]=(0,a.useState)({}),[C,M]=(0,a.useState)(!y),S=x.get("site_id")??l??"",P=(0,a.useMemo)(()=>o.find(e=>e.id===S),[o,S]),_=P?.name??S??"Sin sede",E=(0,a.useMemo)(()=>["access"],[]);(0,a.useEffect)(()=>{if(!y){w({}),M(!0);return}let e=!0,t=(0,c.createClient)(),r=S||l||null;return M(!1),Promise.all(E.map(e=>t.rpc("has_permission",{p_permission_code:`${b}.${e}`,p_site_id:r,p_area_id:null}))).then(t=>{if(!e)return;let r={};t.forEach((e,t)=>{r[E[t]]=!e.error&&!!e.data}),w(r),M(!0)}).catch(()=>{e&&(w({}),M(!0))}),()=>{e=!1}},[S,l,E]);let O=e=>!!e&&!!m[e],L=(0,a.useMemo)(()=>C?N.map(e=>({label:e.label,items:e.items.filter(e=>(e=>{if(!y)return!0;if(!C)return!1;if(e.allowedRoles?.length){let t=String(n??"").toLowerCase();if(!e.allowedRoles.some(e=>e.toLowerCase()===t))return!1}return e.required?.length?e.required.every(e=>O(e)):!e.anyOf?.length||e.anyOf.some(e=>O(e))})(e))})).filter(e=>e.items.length>0):[],[C,m]);return(0,r.jsx)("div",{className:"min-h-screen bg-[var(--ui-bg)] text-[var(--ui-text)]",children:(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsx)("div",{className:`fixed inset-0 z-40 bg-black/30 transition lg:hidden ${p?"opacity-100":"pointer-events-none opacity-0"}`,onClick:()=>h(!1),"aria-hidden":"true"}),(0,r.jsxs)("aside",{className:`ui-sidebar fixed left-0 top-0 z-50 flex h-full w-72 flex-col gap-4 px-4 py-5 transition-transform lg:static lg:translate-x-0 lg:shadow-none ${p?"translate-x-0":"-translate-x-full"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(v,{entity:g,title:"Vento OS",subtitle:`${j} \xb7 Clientes`}),(0,r.jsx)("button",{type:"button",onClick:()=>h(!1),className:"h-10 rounded-lg px-3 text-sm font-semibold text-[var(--ui-muted)] hover:bg-[var(--ui-surface-2)] lg:hidden",children:"Cerrar"})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-[var(--ui-border)] bg-[var(--ui-surface-2)] px-4 py-3",children:[(0,r.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-[var(--ui-muted)]",children:"Sede activa"}),(0,r.jsx)("div",{className:"mt-1 text-sm font-semibold text-[var(--ui-text)]",children:_})]}),(0,r.jsx)("nav",{className:"flex flex-1 flex-col gap-4 overflow-y-auto pr-1",children:C?0===L.length?(0,r.jsx)("div",{className:"rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface-2)] px-3 py-2 text-xs text-[var(--ui-muted)]",children:"No tienes permisos visibles en esta sede."}):L.map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"px-2 text-xs font-semibold uppercase tracking-wide text-[var(--ui-muted)]",children:e.label}),(0,r.jsx)("div",{className:"space-y-1",children:e.items.map(e=>{var t;return(0,r.jsx)(k,{item:e,active:"/"===(t=e.href)?"/"===d:d===t||d.startsWith(`${t}/`),onNavigate:()=>h(!1)},e.href)})})]},e.label)):(0,r.jsx)("div",{className:"rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface-2)] px-3 py-2 text-xs text-[var(--ui-muted)]",children:"Cargando permisos..."})})]}),(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,r.jsx)("header",{className:"ui-header sticky top-0 z-30",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 px-6 py-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>h(!0),className:"inline-flex items-center rounded-xl border border-[var(--ui-border)] bg-[var(--ui-surface)] h-12 px-4 text-base font-semibold text-[var(--ui-text)] hover:bg-[var(--ui-surface-2)] lg:hidden",children:"Menú"}),(0,r.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-[var(--ui-surface-2)] ring-1 ring-inset ring-[var(--ui-border)]",children:(0,r.jsx)("img",{src:`/logos/${g}.svg`,alt:j,className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-[var(--ui-text)]",children:j}),(0,r.jsx)("span",{className:"text-xs text-[var(--ui-muted)]",children:"Ssistema POS"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u,{sites:o,activeSiteId:l}),(0,r.jsx)(f,{name:t,role:n??void 0,email:i,sites:o})]})]})}),(0,r.jsx)("main",{className:"min-w-0 flex-1 px-6 py-8",children:e})]})]})})}e.s(["VentoChrome",()=>C],79422)}]);